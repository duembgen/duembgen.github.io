---
layout: post
title: "Writing blog-posts in 2025"
date: 2025-08-18
categories: [misc]
---

_I created this blogpost when writing [this other post](/research/2025/08/18/kernel-image-primal-dual.html) and the follow-up post [here](/research/2025/08/24/kipd-minimization.html)._

This is a recipe for how I am writing blogposts, with a little help from LLMs (Gemini, in my case). By sharing how I am using this tool I hope to either tell you something that you might find helpful, or to hear from you about how I could improve my pipeline.

## First step: hand-write notes

I still like writing notes by hand, that is, on my Samsung tablet. Writing helps me think, I enjoy the creative process of moving things around, changing layout. (There is also the practical aspects that many coffee shops in Paris have a no-laptop policy on certain days, but Tablets are fine, and a tablet heats up my lap way less than my laptop when I am on a train in summer.)

I try to keep my handwriting relatively clear, and for the sake of the model, I try to keep a normal layout, as opposed to having flowchart-diagrams, trees, and other weird stuff that are fun to do but a bit unpractical for an LLM to translate to a blogpost. 

If you are curious, [here](/assets/pdfs/KernelImagePrimalDual.pdf) is the first version of my (messy) scribbles at the basis of this blogpost. 

## Second step: write instructions

I created this little general context prompt that I can use for future blog posts as well. Additions from the second iteration are written in **bold**.
```markdown
You are an expert academic writing a blog post. In doing so, you should: 

- The output should in markdown format compatible with the jekyll template “minima” that I use for my homepage.
- Keep the sections short, use hyperlinks to move between different sections. 
- Write math using the mathjax syntax. **Note that you need to add a clear line before and after block-equations that are delimited with $$, for them to render correctly.**
- The writing should be understandable by students with basic mathematical education. 
- Write matrix and vector variables in boldface. 
- Give optimization problems a name so that it is easy to refer to them. 
- Add a little text in the beginning to explain the context. 
- Add a little text in the end to conclude the findings. 

You can find below the pdf-version of the scribbles based on which I would like you to write this post. 
```

Then, I added these few lines for this particular blog post:
```markdown
For this post in particular, also do the following:

- There are some questions. Can you figure out if there is a mistake in my math? If so, fix the math with as minimal changes as possible. 
- Add a table that lists the final optimization for the kernel vs. image form and the dual vs. primal form, in the beginning of the post. This helps the reader to have a good overview. 
```

## Third step: call LLM

For this particular blogpost, I add a set of additional instructions. In fact there were some points in my mathematical derivation that did not pan out 100%. I asked Gemini to fix those points, while changing as few things as possible. I also ask for a nice overview table. The gneration took 90 seconds. I copy the text to after the preamble, which I wrote myself, and investigated the rendered site.

## Forth step: reiterate

First, I had to fix the MathJax rendering, by adding a little code snippet to my `_includes/head.html` file. I did this by asking Gemini, of course :)

Then, I went through the generated, rendered blog post. The main thing I needed to do is fix some spacing. I went ahead and added a note about that in the instructions as well, for future usage. 

In terms of the math, I removed a few trivial statements.

There was a note generated by Gemini that it did not understand one of my comments:
```markdown
> **A Note on the Scribbles:** The notes ask about "3 variables." For our example, there is only one degree of freedom, hence one slack variable. The mention of three variables likely comes from a different example, perhaps a bivariate polynomial, which can have more complex dependencies between coefficients and thus more degrees of freedom.
```
Indeed, that comment came from a Youtube video that I watched on the topic. It confirms my suspicion that it was just a small mistake by the speaker. I removed the comment.

Finally, Gemini omitted a couple of technical details. I asked it to add those back, making it each time write a new paragraph so that I can paste it easily where I want. I did this for the derivation of the Dual Problem, and for explicitly writing out the forms of the matrices $A_0$ to $A_4$ and $B_1$. 

I also added some motivational paragraphs and shortened the writing here and there. 

## Final step (optional): code

For this particular blog post, it seemed appropriate to also have a coded version, to verify the math, and to provide more intuition. 
I generated a new template prompt that could be used for this purpose. 

```markdown
You are an expert academic who wants to provide a jupyter notebook that goes with the blogpost. In doing so, you should

- Use cvxpy with the open-source solver CVXOPT for solving SDPs. 
- Also create the requirements.txt file that contains all requirements, so that it can be easily run using mybinder.org
- Reduce the text to a minimum and use EXACTLY the same names and notation that are used in the blogpost. 

For this particular post, I would like you to:

- Create 4 different functions that take in the problem data and output the solution to the 4 different optimization problems. 
- Create one feasible and one infeasible problem. For each problem, show what matrix the different approaches produce and also print out how long it took. 

The original post is attached below. 
```

## Final final step (oops): reiterate blog post

As it turns out, Gemini did not see an important mistake in my original dual problems. The dual problems I had written *assumed* that the value 0 was attained, so they actually only worked for feasible primal problems. I noticed this thanks to the code. In fact, the "interpretations" that Gemini hat written in the notebook had many logical inconsistencies, which was a red flag. And this confirmed my suspicion that there *was* something wrong in my original notes, it just was not exactly what I expected. I went back to my whiteboard and my tablet and figured out what happened here. Then, I gave the following prompt to Gemini: 
```
I have written a blogpost that had a mistake. It was based on a handwritten note. I have now fixed the handwritten note -- see the attached Pdf. Can you adjust the blogpost accordingly? The blogpost is also attached. The mistake was that the dual problem was always feasible, ie, it attained the value zero. This is of course wrong -- when the primal is infeasible the dual should also be able to take value infinity. I forgot that I had to use the theorem of strong alternatives when dealing with these feasibility problems.
```
I attached my new [notes](/assets/pdfs/KernelImagePrimalDual_v2.pdf) and the blogpost source file. The output was pretty usable after a few minor edits. 

## Follow-up blogpost

I came back to the original blogpost a week later because I needed an evolution of the material described. In particular, I wanted to see what happens to these four formulations when you add a cost, ie, when you are actually minimizing a polynomial. I started with some handwritten notes but I realized that it soon became an almost purely mechanic exercise of reformulating the problems. 

So instead, I turned directly to Gemini and asked the following: 

```markdown
I have a blogpost (see attached .md) about SOS feasibility problems using 4 different formulations: Kernel-Primal, Kernel-Dual, Image-Primal, Image-Dual. Now I would like to  extend this to the minimization setup where we want to solve:
max gamma s.t. p(x) - gamma = v(x)'Xv(x0, X>=0. For univariate polynomials, this will always provide the solution to the problem min p(x). For multivariate polynomials it will at least provide a lower bound.

Can you create a new blog post, following closely the structure of the original blog post, where you treat this variation of the problem? In particular, I want to see a table with the 4 problem formulations and one section for each. Also, I want you to create python notebook that implements this variation.

**As always, follow these instructions when writing Markdown code for my Jekyll blog:**

- inline math should be surrounded by $. Avoid using symbols like γ and use $\gamma$ instead.
- full equations should be marked by $$, using an empty line before and after for correct formatting.
**
```
After only 30.6 seconds of thinking, it output a blogpost and a runnable jupyter notebook. The only edits I had to do were: 

- Fix some notation from symbols to LaTeX math. I added a little general instruction in the prompt for future use. 
- Shorten text. To my taste Gemini is a bit too verbose, so I shortened the output significantly. 
- Analyze results. The generated jupyter notebook was great, but the analysis of the results was not saying anything interesting. Also, Gemini did a clumsy choice of polynomial: one that has two global minima. I kept this for its educational value, but also added a slight perturbation of the problem that has only one global minimum. So I made these small changes, but this took less than 15 minutes. 


## Conclusion

The conclusion after writing blogpost number one was: After almost a full day of work (I started this at ca. 11:30, I am done now and it is 19:00), I have

- Two blog posts
- A proof-of-concept jupyter notebook
- A pipeline in place for writing future blog posts: 
  - Prompt templates that I can reuse in the future
  - My blog setup with bibliography automatically exported from Zotoro.

I wish I knew how much time I actually saved by using Gemini, and if I would have found my mistake more easily had I not been in "LLM" mode with my brain. But it for sure felt like a pleasant and productive day, and I did learn a ton, not only about optimization but also about interacting with Gemini.

The conclusion after writing blogpost number two is: for evolutions of the original blogpost and notebook, Gemini definitely saved me so much time. The reason is that most of the thinking and reiterating was already done with the first blogpost, and that blogpost was super useful to provide context to the second blogpost. 
